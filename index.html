<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜Ÿæ²³ç¤¾åŒº - ä¸´æ³‰ä¸€ä¸­2026å±Šé«˜ä¸‰ç­çº§å¹³å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        :root {
            --primary: #4a6fa5;
            --secondary: #6b8cbc;
            --accent: #ff7e5f;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
        }
        
        body {
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* å¤´éƒ¨æ ·å¼ */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 25px 0;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .logo span {
            color: #ffd166;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 15px;
        }
        
        /* å¯¼èˆªæ  */
        nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .nav-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 30px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .nav-btn:hover, .nav-btn.active {
            background: white;
            color: var(--primary);
        }
        
        /* ä¸»å†…å®¹åŒº */
        .main-content {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .content-area {
            flex: 3;
            min-width: 300px;
        }
        
        .sidebar {
            flex: 1;
            min-width: 250px;
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }
        
        .card-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--primary);
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* ç”¨æˆ·ä¿¡æ¯æ ·å¼ */
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: var(--border-radius);
        }
        
        .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .user-details h3 {
            margin-bottom: 5px;
        }
        
        .user-stats {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        input:focus, textarea:focus, select:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #3a5a8a;
        }
        
        .btn-secondary {
            background: var(--secondary);
            color: white;
        }
        
        .btn-accent {
            background: var(--accent);
            color: white;
        }
        
        .btn-accent:hover {
            background: #e86a4a;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.9rem;
        }
        
        /* å¸–å­æ ·å¼ */
        .post {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--primary);
        }
        
        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .post-author {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .author-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6b8cbc, #4a6fa5);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .author-info h4 {
            margin-bottom: 3px;
        }
        
        .author-class {
            font-size: 0.85rem;
            color: #777;
        }
        
        .post-time {
            font-size: 0.85rem;
            color: #999;
        }
        
        .post-category {
            display: inline-block;
            background: #e9ecef;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-bottom: 10px;
        }
        
        .post-content {
            margin-bottom: 15px;
            line-height: 1.7;
        }
        
        .post-actions {
            display: flex;
            gap: 15px;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            gap: 5px;
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .action-btn:hover {
            color: var(--primary);
        }
        
        .liked {
            color: var(--danger);
        }
        
        /* æ ‘æ´ç‰¹å®šæ ·å¼ */
        .treehole-post {
            border-left-color: #ff7e5f;
            background-color: #fff9f7;
        }
        
        .treehole-post .post-author {
            opacity: 0.7;
        }
        
        .treehole-post .author-avatar {
            background: linear-gradient(135deg, #ff9a8b, #ff7e5f);
        }
        
        .treehole-post .author-info h4 {
            color: #888;
        }
        
        .reactions-container {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .reaction-btn {
            background: #f1f3f5;
            border: 1px solid #dee2e6;
            border-radius: 20px;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .reaction-btn:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        
        .reaction-btn.active {
            background: #e7f5ff;
            border-color: #4a6fa5;
        }
        
        .delete-btn {
            background-color: transparent;
            color: #999;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 3px 8px;
            font-size: 0.8rem;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.2s;
        }
        
        .delete-btn:hover {
            background-color: #ffebee;
            color: var(--danger);
            border-color: var(--danger);
        }
        
        /* ç­çº§ç½‘æ ¼ */
        .class-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .class-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .class-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .class-card h3 {
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .class-stats {
            font-size: 0.9rem;
            color: #666;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        
        /* ç­›é€‰æ  */
        .filter-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-select {
            flex: 1;
            min-width: 150px;
        }
        
        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .class-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .filter-bar {
                flex-direction: column;
            }
            
            .filter-select {
                min-width: 100%;
            }
            
            .user-info {
                flex-direction: column;
                text-align: center;
            }
            
            .user-stats {
                justify-content: center;
            }
        }
        
        /* å·¥å…·ç±» */
        .hidden {
            display: none !important;
        }
        
        .mt-3 {
            margin-top: 15px;
        }
        
        .mb-3 {
            margin-bottom: 15px;
        }
        
        .text-center {
            text-align: center;
        }
        
        .text-muted {
            color: #6c757d;
        }
        
        .emoji {
            font-size: 1.2rem;
        }
        
        /* å¯†ç ä¿æŠ¤åˆ é™¤æ ·å¼ */
        .password-prompt {
            margin-top: 15px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid var(--warning);
        }
        
        .password-input {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <span>âœ¦</span>æ˜Ÿæ²³ç¤¾åŒº<span>âœ¦</span>
            </div>
            <div class="subtitle">ä¸´æ³‰ä¸€ä¸­2026å±Šé«˜ä¸‰å­¦ç”Ÿä¸“å±äº¤æµå¹³å°</div>
            <nav>
                <button class="nav-btn active" data-page="home">é¦–é¡µåŠ¨æ€</button>
                <button class="nav-btn" data-page="treehole">åŒ¿åæ ‘æ´</button>
                <button class="nav-btn" data-page="creation">åˆ›ä½œä¸“åŒº</button>
                <button class="nav-btn" data-page="classes">ç­çº§ç©ºé—´</button>
                <button class="nav-btn" data-page="profile">ä¸ªäººä¸»é¡µ</button>
            </nav>
        </div>
    </header>
    
    <div class="container">
        <div class="main-content">
            <div class="content-area">
                <!-- é¦–é¡µåŠ¨æ€ -->
                <div id="home-page" class="page">
                    <div class="card">
                        <h2 class="card-title">ğŸ“ å‘å¸ƒæ–°åŠ¨æ€</h2>
                        <form id="post-form">
                            <div class="form-group">
                                <select id="post-type" required>
                                    <option value="">é€‰æ‹©å‘å¸ƒç±»å‹</option>
                                    <option value="dynamic">æ™®é€šåŠ¨æ€</option>
                                    <option value="question">æé—®æ±‚åŠ©</option>
                                    <option value="share">åˆ†äº«å†…å®¹</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <textarea id="post-content" placeholder="åˆ†äº«ä½ çš„æƒ³æ³•ã€é—®é¢˜æˆ–å‘ç°..." required></textarea>
                            </div>
                            <div class="form-group">
                                <label>é€‰æ‹©å¯è§èŒƒå›´ï¼š</label>
                                <select id="post-visibility">
                                    <option value="all">å…¨éƒ¨ç­çº§å¯è§</option>
                                    <option value="my-class">ä»…æœ¬ç­å¯è§</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">å‘å¸ƒåŠ¨æ€</button>
                        </form>
                    </div>
                    
                    <div class="card">
                        <h2 class="card-title">ğŸ“° æœ€æ–°åŠ¨æ€</h2>
                        <div class="filter-bar">
                            <select id="class-filter" class="filter-select">
                                <option value="all">å…¨éƒ¨ç­çº§</option>
                                <!-- ç­çº§é€‰é¡¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                            </select>
                            <select id="type-filter" class="filter-select">
                                <option value="all">å…¨éƒ¨ç±»å‹</option>
                                <option value="dynamic">åŠ¨æ€</option>
                                <option value="question">æé—®</option>
                                <option value="share">åˆ†äº«</option>
                            </select>
                            <input type="text" id="search-input" placeholder="æœç´¢å†…å®¹..." class="filter-select">
                        </div>
                        <div id="posts-container">
                            <!-- å¸–å­å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
                
                <!-- åŒ¿åæ ‘æ´ -->
                <div id="treehole-page" class="page hidden">
                    <div class="card">
                        <h2 class="card-title">ğŸ•³ï¸ åŒ¿åæ ‘æ´ - å€¾è¯‰ä½ çš„å¿ƒäº‹</h2>
                        <p class="text-muted mb-3">è¿™é‡Œå®Œå…¨åŒ¿åï¼Œä¸ä¼šè®°å½•ä»»ä½•ä¸ªäººä¿¡æ¯ã€‚é€‰æ‹©æƒ…æ„Ÿåˆ†ç±»ï¼Œå†™ä¸‹ä½ æƒ³è¯´çš„è¯...</p>
                        
                        <form id="treehole-form">
                            <div class="form-group">
                                <label>æƒ…æ„Ÿåˆ†ç±»ï¼š</label>
                                <select id="treehole-category" required>
                                    <option value="">è¯·é€‰æ‹©åˆ†ç±»</option>
                                    <option value="study">ğŸ“š å­¦ä¹ å‹åŠ›</option>
                                    <option value="relationship">ğŸ‘¥ äººé™…å…³ç³»</option>
                                    <option value="family">ğŸ  å®¶åº­çƒ¦æ¼</option>
                                    <option value="future">â“ æœªæ¥è¿·èŒ«</option>
                                    <option value="secret">ğŸ¤« å°ç§˜å¯†</option>
                                    <option value="happy">ğŸŒŸ å¼€å¿ƒåˆ†äº«</option>
                                    <option value="other">ğŸ’­ å…¶ä»–</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <textarea id="treehole-content" placeholder="å†™ä¸‹ä½ æƒ³è¯´çš„è¯ï¼ˆæœ€å¤š500å­—ï¼‰..." maxlength="500" required></textarea>
                                <div class="text-right text-muted" style="margin-top:5px;">
                                    <span id="char-count">0</span>/500
                                </div>
                            </div>
                            <button type="submit" class="btn btn-accent">åŒ¿åå‘å¸ƒåˆ°æ ‘æ´</button>
                        </form>
                        
                        <div class="password-prompt mt-3">
                            <p><strong>ç®¡ç†å‘˜åˆ é™¤åŠŸèƒ½ï¼š</strong>æ¯ä¸ªæ ‘æ´å¸–å­éƒ½æœ‰ä¸€ä¸ªåˆ é™¤æŒ‰é’®ï¼Œä½†éœ€è¦å¯†ç æ‰èƒ½åˆ é™¤ã€‚</p>
                            <p class="text-muted">å¯†ç æç¤ºï¼šç§‘å¹»å°è¯´å®¶ï¼Œæœºå™¨äººä¸‰å®šå¾‹çš„æå‡ºè€…ã€‚</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h2 class="card-title">ğŸ—¨ï¸ æ ‘æ´å¿ƒå£°</h2>
                        <div id="treehole-container">
                            <!-- æ ‘æ´å¸–å­å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
                
                <!-- åˆ›ä½œä¸“åŒº -->
                <div id="creation-page" class="page hidden">
                    <div class="card">
                        <h2 class="card-title">âœï¸ å‘å¸ƒåˆ›ä½œ</h2>
                        <form id="creation-form">
                            <div class="form-group">
                                <input type="text" id="creation-title" placeholder="åˆ›ä½œæ ‡é¢˜" required>
                            </div>
                            <div class="form-group">
                                <select id="creation-type" required>
                                    <option value="">é€‰æ‹©åˆ›ä½œç±»å‹</option>
                                    <option value="essay">ä½œæ–‡å±•ç¤º</option>
                                    <option value="notes">å­¦ä¹ ç¬”è®°</option>
                                    <option value="method">å­¦ä¹ æ–¹æ³•</option>
                                    <option value="other">å…¶ä»–åˆ›ä½œ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <textarea id="creation-content" placeholder="åœ¨è¿™é‡Œå†™ä¸‹ä½ çš„åˆ›ä½œå†…å®¹..." rows="10" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">å‘å¸ƒåˆ›ä½œ</button>
                        </form>
                    </div>
                    
                    <div class="card">
                        <h2 class="card-title">ğŸ“š åˆ›ä½œå±•ç¤º</h2>
                        <div id="creations-container">
                            <!-- åˆ›ä½œå†…å®¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
                
                <!-- ç­çº§ç©ºé—´ -->
                <div id="classes-page" class="page hidden">
                    <div class="card">
                        <h2 class="card-title">ğŸ« ç­çº§ç©ºé—´ - ä¸´æ³‰ä¸€ä¸­2026å±Šé«˜ä¸‰</h2>
                        <p class="text-muted mb-3">é€‰æ‹©ç­çº§æŸ¥çœ‹ç­çº§ä¸“å±å†…å®¹</p>
                        <div class="class-grid" id="classes-container">
                            <!-- ç­çº§å¡ç‰‡å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                    
                    <div class="card" id="class-details" style="display:none;">
                        <button class="btn btn-sm btn-secondary mb-3" id="back-to-classes">è¿”å›ç­çº§åˆ—è¡¨</button>
                        <h2 class="card-title" id="class-detail-title">é«˜ä¸‰(1)ç­</h2>
                        <div class="class-stats">
                            <div class="stat">
                                <div class="stat-value" id="class-member-count">0</div>
                                <div class="stat-label">ç­çº§æˆå‘˜</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="class-post-count">0</div>
                                <div class="stat-label">åŠ¨æ€æ•°é‡</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="class-creation-count">0</div>
                                <div class="stat-label">åˆ›ä½œæ•°é‡</div>
                            </div>
                        </div>
                        <div id="class-posts-container" class="mt-3">
                            <!-- ç­çº§å¸–å­å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
                
                <!-- ä¸ªäººä¸»é¡µ -->
                <div id="profile-page" class="page hidden">
                    <div class="card">
                        <div class="user-info">
                            <div class="avatar" id="profile-avatar">A</div>
                            <div class="user-details">
                                <h3 id="profile-name">åŒ¿åç”¨æˆ·</h3>
                                <div id="profile-class">é«˜ä¸‰(1)ç­</div>
                                <div class="user-stats">
                                    <div class="stat">
                                        <div class="stat-value" id="profile-posts">0</div>
                                        <div class="stat-label">å‘å¸–æ•°</div>
                                    </div>
                                    <div class="stat">
                                        <div class="stat-value" id="profile-likes">0</div>
                                        <div class="stat-label">è·èµæ•°</div>
                                    </div>
                                    <div class="stat">
                                        <div class="stat-value" id="profile-comments">0</div>
                                        <div class="stat-label">è¯„è®ºæ•°</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>ä¿®æ”¹æ˜µç§°ï¼š</label>
                            <input type="text" id="update-name" placeholder="è¾“å…¥æ–°æ˜µç§°">
                        </div>
                        <div class="form-group">
                            <label>ä¿®æ”¹ç­çº§ï¼š</label>
                            <select id="update-class">
                                <!-- ç­çº§é€‰é¡¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                            </select>
                        </div>
                        <button class="btn btn-primary" id="update-profile">æ›´æ–°ä¸ªäººä¿¡æ¯</button>
                    </div>
                    
                    <div class="card">
                        <h2 class="card-title">ğŸ“„ æˆ‘çš„å¸–å­</h2>
                        <div id="my-posts-container">
                            <!-- ç”¨æˆ·å¸–å­å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar">
                <!-- ç”¨æˆ·ä¿¡æ¯ä¾§è¾¹æ  -->
                <div class="card">
                    <h2 class="card-title">ğŸ‘¤ ä¸ªäººä¿¡æ¯</h2>
                    <div class="user-info">
                        <div class="avatar" id="sidebar-avatar">A</div>
                        <div class="user-details">
                            <h3 id="sidebar-name">åŒ¿åç”¨æˆ·</h3>
                            <div id="sidebar-class">æœªé€‰æ‹©ç­çº§</div>
                            <div class="user-stats">
                                <div class="stat">
                                    <div class="stat-value" id="sidebar-posts">0</div>
                                    <div class="stat-label">å‘å¸–</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value" id="sidebar-likes">0</div>
                                    <div class="stat-label">è·èµ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <button class="btn btn-secondary btn-sm" id="edit-profile">ç¼–è¾‘èµ„æ–™</button>
                        <button class="btn btn-secondary btn-sm" id="logout">é€€å‡ºç™»å½•</button>
                    </div>
                </div>
                
                <!-- ç­çº§å¿«é€Ÿè®¿é—® -->
                <div class="card">
                    <h2 class="card-title">ğŸ« ç­çº§å¿«é€Ÿè®¿é—®</h2>
                    <div id="quick-classes">
                        <!-- ç­çº§å¿«é€Ÿé“¾æ¥å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <!-- æ ‘æ´æç¤º -->
                <div class="card">
                    <h2 class="card-title">ğŸ•³ï¸ æ ‘æ´è¯´æ˜</h2>
                    <p class="text-muted" style="font-size:0.9rem;">
                        <strong>å®Œå…¨åŒ¿åï¼š</strong>æ— éœ€ç™»å½•ï¼Œä¸è®°å½•ä»»ä½•ä¸ªäººä¿¡æ¯<br>
                        <strong>æƒ…æ„Ÿåˆ†ç±»ï¼š</strong>é€‰æ‹©åˆé€‚æ ‡ç­¾å€¾è¯‰å¿ƒå£°<br>
                        <strong>éšç§ä¿æŠ¤ï¼š</strong>ä¸å®åå†…å®¹å®Œå…¨éš”ç¦»<br>
                        <strong>ç®€å•äº’åŠ¨ï¼š</strong>ä»…æ”¯æŒè¡¨æƒ…ååº”ï¼Œæ— è¯„è®ºåŠŸèƒ½<br>
                        <strong>æ•°æ®å®‰å…¨ï¼š</strong>å†…å®¹ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- è¯„è®ºæ¨¡æ€æ¡† -->
    <div id="comment-modal" class="modal">
        <div class="modal-content">
            <h3 class="card-title">ğŸ’¬ è¯„è®º</h3>
            <div id="comment-list">
                <!-- è¯„è®ºå°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="form-group mt-3">
                <textarea id="new-comment" placeholder="å†™ä¸‹ä½ çš„è¯„è®º..."></textarea>
            </div>
            <div class="text-right">
                <button class="btn btn-secondary" id="close-comment-modal">å…³é—­</button>
                <button class="btn btn-primary" id="submit-comment">å‘å¸ƒè¯„è®º</button>
            </div>
        </div>
    </div>
    
    <!-- å¯†ç éªŒè¯æ¨¡æ€æ¡† -->
    <div id="password-modal" class="modal">
        <div class="modal-content">
            <h3 class="card-title">ğŸ”’ éªŒè¯åˆ é™¤æƒé™</h3>
            <p>è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ä»¥åˆ é™¤æ­¤æ ‘æ´å¸–å­ï¼š</p>
            <div class="form-group">
                <input type="password" id="delete-password" placeholder="è¾“å…¥å¯†ç ">
            </div>
            <p class="text-muted">æç¤ºï¼šç§‘å¹»å°è¯´å®¶ï¼Œæœºå™¨äººä¸‰å®šå¾‹çš„æå‡ºè€…ã€‚</p>
            <div class="text-right mt-3">
                <button class="btn btn-secondary" id="cancel-delete">å–æ¶ˆ</button>
                <button class="btn btn-danger" id="confirm-delete">ç¡®è®¤åˆ é™¤</button>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡å’Œé…ç½®
        const CONFIG = {
            APP_NAME: 'æ˜Ÿæ²³ç¤¾åŒº',
            CLASS_COUNT: 42,
            ADMIN_PASSWORD: 'æˆ‘æ˜¯é˜¿è¥¿è«å¤«', // åˆ é™¤æ ‘æ´çš„å¯†ç 
            STORAGE_KEYS: {
                USER: 'starRiver_user',
                POSTS: 'starRiver_posts',
                TREEHOLE: 'starRiver_treehole',
                CREATIONS: 'starRiver_creations',
                REACTIONS: 'starRiver_reactions'
            }
        };
        
        // åˆå§‹ç¤ºä¾‹æ•°æ®
        const SAMPLE_POSTS = [
            {
                id: 'post1',
                authorId: 'user1',
                authorName: 'å¼ æ˜',
                authorClass: '12',
                type: 'dynamic',
                content: 'ä»Šå¤©æ•°å­¦è¯¾æœ€åä¸€é“é¢˜çœŸéš¾ï¼Œæœ‰æ²¡æœ‰åŒå­¦è§£å‡ºæ¥äº†ï¼Ÿ',
                timestamp: '2026-02-22T14:30:00',
                likes: [],
                likesCount: 0,
                comments: [
                    { id: 'c1', authorName: 'æå', content: 'æˆ‘è§£å‡ºæ¥äº†ï¼Œæ™šè‡ªä¹ å¯ä»¥æ•™ä½ ', timestamp: '2026-02-22T15:10:00' }
                ],
                visibility: 'all'
            },
            {
                id: 'post2',
                authorId: 'user2',
                authorName: 'ç‹èŠ³',
                authorClass: '8',
                type: 'question',
                content: 'æ±‚æ¨èå¥½çš„è‹±è¯­å•è¯è®°å¿†æ–¹æ³•ï¼Œæœ€è¿‘èƒŒå•è¯æ•ˆç‡å¥½ä½ğŸ˜”',
                timestamp: '2026-02-22T10:15:00',
                likes: ['user1', 'user3'],
                likesCount: 2,
                comments: [],
                visibility: 'all'
            },
            {
                id: 'post3',
                authorId: 'user3',
                authorName: 'é™ˆä¼Ÿ',
                authorClass: '25',
                type: 'share',
                content: 'åˆ†äº«ä¸€ä¸ªå¾ˆå¥½çš„ç‰©ç†å­¦ä¹ ç½‘ç«™ï¼Œé‡Œé¢æœ‰å¾ˆå¤šåŠ¨ç”»æ¼”ç¤ºï¼é“¾æ¥ï¼šhttps://example.com/physics',
                timestamp: '2026-02-21T16:45:00',
                likes: ['user2'],
                likesCount: 1,
                comments: [],
                visibility: 'my-class'
            }
        ];
        
        const SAMPLE_TREEHOLE = [
            {
                id: 'tree1',
                category: 'study',
                categoryText: 'ğŸ“š å­¦ä¹ å‹åŠ›',
                content: 'ä¸€æ¨¡è€ƒè¯•æ²¡è€ƒå¥½ï¼Œæ„Ÿè§‰è‡ªå·±å¥½å·®åŠ²ï¼Œç¦»ç†æƒ³å¤§å­¦è¶Šæ¥è¶Šè¿œäº†...',
                timestamp: '2026-02-22T20:15:00',
                reactions: { 'ğŸ‘': 3, 'â¤ï¸': 5, 'ğŸ¤—': 2, 'ğŸŒˆ': 1, 'ğŸ’¡': 0, 'ğŸ«‚': 4 }
            },
            {
                id: 'tree2',
                category: 'relationship',
                categoryText: 'ğŸ‘¥ äººé™…å…³ç³»',
                content: 'å’Œå¥½æœ‹å‹é—¹çŸ›ç›¾äº†ï¼Œä¸çŸ¥é“è¯¥æ€ä¹ˆå’Œè§£ï¼Œæ¯å¤©è§é¢éƒ½å¾ˆå°´å°¬ã€‚',
                timestamp: '2026-02-21T18:30:00',
                reactions: { 'ğŸ‘': 2, 'â¤ï¸': 8, 'ğŸ¤—': 4, 'ğŸŒˆ': 1, 'ğŸ’¡': 0, 'ğŸ«‚': 3 }
            },
            {
                id: 'tree3',
                category: 'happy',
                categoryText: 'ğŸŒŸ å¼€å¿ƒåˆ†äº«',
                content: 'ä»Šå¤©è§£å‡ºäº†ä¸€é“å›°æ‰°æˆ‘ä¸€å‘¨çš„æ•°å­¦é¢˜ï¼Œå¤ªå¼€å¿ƒäº†ï¼',
                timestamp: '2026-02-20T22:05:00',
                reactions: { 'ğŸ‘': 5, 'â¤ï¸': 3, 'ğŸ¤—': 1, 'ğŸŒˆ': 2, 'ğŸ’¡': 1, 'ğŸ«‚': 0 }
            }
        ];
        
        const SAMPLE_CREATIONS = [
            {
                id: 'creation1',
                authorId: 'user1',
                authorName: 'å¼ æ˜',
                authorClass: '12',
                title: 'æˆ‘çš„é«˜è€ƒä½œæ–‡ç»ƒä¹ ï¼šã€Šç§‘æŠ€çš„æ¸©åº¦ã€‹',
                type: 'essay',
                content: 'åœ¨ç§‘æŠ€é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œæˆ‘ä»¬å¸¸å¸¸æƒŠå¹äºæŠ€æœ¯çš„å†°å†·ä¸é«˜æ•ˆ...',
                timestamp: '2026-02-20T15:30:00',
                likes: ['user2'],
                likesCount: 1,
                comments: []
            }
        ];
        
        // åº”ç”¨çŠ¶æ€
        let currentUser = null;
        let allPosts = [];
        let treeholePosts = [];
        let creations = [];
        let currentPostIdForComment = null;
        let currentTreeholeIdForDelete = null;
        
        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
            setupEventListeners();
            loadInitialData();
            renderClasses();
            updateUI();
        });
        
        // åˆå§‹åŒ–åº”ç”¨æ•°æ®
        function initApp() {
            // å°è¯•åŠ è½½ç”¨æˆ·æ•°æ®
            const userData = localStorage.getItem(CONFIG.STORAGE_KEYS.USER);
            if (userData) {
                currentUser = JSON.parse(userData);
            } else {
                // åˆ›å»ºé»˜è®¤ç”¨æˆ·
                currentUser = {
                    id: 'user_' + Date.now(),
                    name: 'åŒ¿åç”¨æˆ·',
                    classId: '1',
                    joinDate: new Date().toISOString().split('T')[0],
                    stats: {
                        postsCount: 0,
                        likesReceived: 0,
                        commentsCount: 0
                    }
                };
                localStorage.setItem(CONFIG.STORAGE_KEYS.USER, JSON.stringify(currentUser));
            }
            
            // åŠ è½½å¸–å­æ•°æ®
            const postsData = localStorage.getItem(CONFIG.STORAGE_KEYS.POSTS);
            allPosts = postsData ? JSON.parse(postsData) : [...SAMPLE_POSTS];
            
            // åŠ è½½æ ‘æ´æ•°æ®
            const treeholeData = localStorage.getItem(CONFIG.STORAGE_KEYS.TREEHOLE);
            treeholePosts = treeholeData ? JSON.parse(treeholeData) : [...SAMPLE_TREEHOLE];
            
            // åŠ è½½åˆ›ä½œæ•°æ®
            const creationsData = localStorage.getItem(CONFIG.STORAGE_KEYS.CREATIONS);
            creations = creationsData ? JSON.parse(creationsData) : [...SAMPLE_CREATIONS];
            
            // ç¡®ä¿æ‰€æœ‰æ•°æ®éƒ½æœ‰å¿…è¦å­—æ®µ
            allPosts.forEach(post => {
                if (!post.likes) post.likes = [];
                if (!post.comments) post.comments = [];
            });
            
            treeholePosts.forEach(post => {
                if (!post.reactions) post.reactions = { 'ğŸ‘': 0, 'â¤ï¸': 0, 'ğŸ¤—': 0, 'ğŸŒˆ': 0, 'ğŸ’¡': 0, 'ğŸ«‚': 0 };
            });
        }
        
        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // å¯¼èˆªæŒ‰é’®
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const page = this.getAttribute('data-page');
                    switchPage(page);
                });
            });
            
            // å‘å¸ƒåŠ¨æ€è¡¨å•
            document.getElementById('post-form').addEventListener('submit', function(e) {
                e.preventDefault();
                createNewPost();
            });
            
            // å‘å¸ƒæ ‘æ´è¡¨å•
            document.getElementById('treehole-form').addEventListener('submit', function(e) {
                e.preventDefault();
                createNewTreeholePost();
            });
            
            // å‘å¸ƒåˆ›ä½œè¡¨å•
            document.getElementById('creation-form').addEventListener('submit', function(e) {
                e.preventDefault();
                createNewCreation();
            });
            
            // æ ‘æ´å­—æ•°ç»Ÿè®¡
            document.getElementById('treehole-content').addEventListener('input', function() {
                document.getElementById('char-count').textContent = this.value.length;
            });
            
            // ç­›é€‰å’Œæœç´¢
            document.getElementById('class-filter').addEventListener('change', updatePosts);
            document.getElementById('type-filter').addEventListener('change', updatePosts);
            document.getElementById('search-input').addEventListener('input', updatePosts);
            
            // ç¼–è¾‘èµ„æ–™
            document.getElementById('edit-profile').addEventListener('click', function() {
                switchPage('profile');
            });
            
            document.getElementById('update-profile').addEventListener('click', updateUserProfile);
            
            // é€€å‡ºç™»å½•
            document.getElementById('logout').addEventListener('click', function() {
                if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                    currentUser = null;
                    localStorage.removeItem(CONFIG.STORAGE_KEYS.USER);
                    window.location.reload();
                }
            });
            
            // è¯„è®ºæ¨¡æ€æ¡†
            document.getElementById('close-comment-modal').addEventListener('click', closeCommentModal);
            document.getElementById('submit-comment').addEventListener('click', submitComment);
            
            // å¯†ç éªŒè¯æ¨¡æ€æ¡†
            document.getElementById('cancel-delete').addEventListener('click', closePasswordModal);
            document.getElementById('confirm-delete').addEventListener('click', confirmDeleteTreehole);
            
            // è¿”å›ç­çº§åˆ—è¡¨
            document.getElementById('back-to-classes').addEventListener('click', function() {
                document.getElementById('class-details').style.display = 'none';
                document.getElementById('classes-container').style.display = 'grid';
            });
            
            // åˆå§‹åŒ–å­—ç¬¦è®¡æ•°
            document.getElementById('char-count').textContent = 
                document.getElementById('treehole-content').value.length;
        }
        
        // åŠ è½½åˆå§‹æ•°æ®
        function loadInitialData() {
            // æ›´æ–°ç”¨æˆ·ç•Œé¢
            updateUserUI();
            
            // ç”Ÿæˆç­çº§é€‰é¡¹
            generateClassOptions();
            
            // æ›´æ–°å¸–å­æ˜¾ç¤º
            updatePosts();
            
            // æ›´æ–°æ ‘æ´æ˜¾ç¤º
            updateTreeholePosts();
            
            // æ›´æ–°åˆ›ä½œæ˜¾ç¤º
            updateCreations();
            
            // æ›´æ–°ç­çº§å¿«é€Ÿè®¿é—®
            updateQuickClasses();
        }
        
        // ç”Ÿæˆç­çº§é€‰é¡¹
        function generateClassOptions() {
            const classFilter = document.getElementById('class-filter');
            const updateClass = document.getElementById('update-class');
            
            // æ¸…ç©ºç°æœ‰é€‰é¡¹
            classFilter.innerHTML = '<option value="all">å…¨éƒ¨ç­çº§</option>';
            updateClass.innerHTML = '';
            
            for (let i = 1; i <= CONFIG.CLASS_COUNT; i++) {
                const option1 = document.createElement('option');
                option1.value = i;
                option1.textContent = `é«˜ä¸‰(${i})ç­`;
                classFilter.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = i;
                option2.textContent = `é«˜ä¸‰(${i})ç­`;
                updateClass.appendChild(option2);
            }
            
            // è®¾ç½®å½“å‰ç”¨æˆ·ç­çº§
            if (currentUser && currentUser.classId) {
                updateClass.value = currentUser.classId;
            }
        }
        
        // æ¸²æŸ“ç­çº§ç½‘æ ¼
        function renderClasses() {
            const container = document.getElementById('classes-container');
            container.innerHTML = '';
            
            for (let i = 1; i <= CONFIG.CLASS_COUNT; i++) {
                const classCard = document.createElement('div');
                classCard.className = 'class-card';
                classCard.innerHTML = `
                    <h3>é«˜ä¸‰(${i})ç­</h3>
                    <div class="class-stats">
                        <span>ğŸ‘¥ ${getRandomInt(40, 55)}</span>
                        <span>ğŸ“ ${getRandomInt(5, 30)}</span>
                    </div>
                    <p style="margin-top:10px;color:#666;font-size:0.9rem;">ç‚¹å‡»è¿›å…¥ç­çº§ç©ºé—´</p>
                `;
                
                classCard.addEventListener('click', function() {
                    showClassDetails(i);
                });
                
                container.appendChild(classCard);
            }
        }
        
        // æ˜¾ç¤ºç­çº§è¯¦æƒ…
        function showClassDetails(classId) {
            // éšè—ç­çº§ç½‘æ ¼
            document.getElementById('classes-container').style.display = 'none';
            
            // æ˜¾ç¤ºç­çº§è¯¦æƒ…
            const classDetail = document.getElementById('class-details');
            classDetail.style.display = 'block';
            
            // æ›´æ–°æ ‡é¢˜
            document.getElementById('class-detail-title').textContent = `é«˜ä¸‰(${classId})ç­`;
            
            // è®¡ç®—ç­çº§ç»Ÿè®¡
            const classMembers = getRandomInt(40, 55);
            const classPosts = allPosts.filter(post => 
                post.authorClass === classId.toString() || post.visibility === 'all'
            ).length;
            const classCreations = creations.filter(creation => 
                creation.authorClass === classId.toString()
            ).length;
            
            // æ›´æ–°ç»Ÿè®¡
            document.getElementById('class-member-count').textContent = classMembers;
            document.getElementById('class-post-count').textContent = classPosts;
            document.getElementById('class-creation-count').textContent = classCreations;
            
            // æ˜¾ç¤ºç­çº§å¸–å­
            const postsContainer = document.getElementById('class-posts-container');
            postsContainer.innerHTML = '';
            
            const classPostsList = allPosts.filter(post => 
                post.authorClass === classId.toString() || post.visibility === 'all'
            );
            
            if (classPostsList.length === 0) {
                postsContainer.innerHTML = '<p class="text-center text-muted">è¿™ä¸ªç­çº§è¿˜æ²¡æœ‰åŠ¨æ€ï¼Œå¿«æ¥å‘å¸ƒç¬¬ä¸€ä¸ªå§ï¼</p>';
            } else {
                classPostsList.forEach(post => {
                    postsContainer.appendChild(createPostElement(post));
                });
            }
        }
        
        // æ›´æ–°ç”¨æˆ·ç•Œé¢
        function updateUserUI() {
            if (!currentUser) return;
            
            // ä¾§è¾¹æ 
            const firstChar = currentUser.name.charAt(0);
            document.getElementById('sidebar-avatar').textContent = firstChar;
            document.getElementById('sidebar-name').textContent = currentUser.name;
            document.getElementById('sidebar-class').textContent = `é«˜ä¸‰(${currentUser.classId})ç­`;
            document.getElementById('sidebar-posts').textContent = currentUser.stats.postsCount;
            document.getElementById('sidebar-likes').textContent = currentUser.stats.likesReceived;
            
            // ä¸ªäººä¸»é¡µ
            document.getElementById('profile-avatar').textContent = firstChar;
            document.getElementById('profile-name').textContent = currentUser.name;
            document.getElementById('profile-class').textContent = `é«˜ä¸‰(${currentUser.classId})ç­`;
            document.getElementById('profile-posts').textContent = currentUser.stats.postsCount;
            document.getElementById('profile-likes').textContent = currentUser.stats.likesReceived;
            document.getElementById('profile-comments').textContent = currentUser.stats.commentsCount;
            
            // æ›´æ–°è¡¨å•
            document.getElementById('update-name').value = currentUser.name;
            document.getElementById('update-class').value = currentUser.classId;
        }
        
        // åˆ‡æ¢é¡µé¢
        function switchPage(page) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(p => {
                p.classList.add('hidden');
            });
            
            // æ˜¾ç¤ºç›®æ ‡é¡µé¢
            document.getElementById(`${page}-page`).classList.remove('hidden');
            
            // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.querySelector(`.nav-btn[data-page="${page}"]`).classList.add('active');
            
            // é¡µé¢ç‰¹å®šæ›´æ–°
            if (page === 'profile') {
                updateMyPosts();
            } else if (page === 'treehole') {
                updateTreeholePosts();
            }
        }
        
        // åˆ›å»ºæ–°å¸–å­
        function createNewPost() {
            const type = document.getElementById('post-type').value;
            const content = document.getElementById('post-content').value.trim();
            const visibility = document.getElementById('post-visibility').value;
            
            if (!type || !content) {
                alert('è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼');
                return;
            }
            
            const newPost = {
                id: 'post_' + Date.now(),
                authorId: currentUser.id,
                authorName: currentUser.name,
                authorClass: currentUser.classId,
                type: type,
                content: content,
                timestamp: new Date().toISOString(),
                likes: [],
                likesCount: 0,
                comments: [],
                visibility: visibility
            };
            
            allPosts.unshift(newPost);
            savePosts();
            
            // æ›´æ–°ç”¨æˆ·ç»Ÿè®¡
            currentUser.stats.postsCount++;
            saveUser();
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('post-form').reset();
            
            // æ›´æ–°UI
            updatePosts();
            updateUserUI();
            
            alert('åŠ¨æ€å‘å¸ƒæˆåŠŸï¼');
        }
        
        // åˆ›å»ºæ–°æ ‘æ´å¸–å­
        function createNewTreeholePost() {
            const category = document.getElementById('treehole-category').value;
            const content = document.getElementById('treehole-content').value.trim();
            
            if (!category || !content) {
                alert('è¯·é€‰æ‹©åˆ†ç±»å¹¶å¡«å†™å†…å®¹ï¼');
                return;
            }
            
            if (content.length > 500) {
                alert('å†…å®¹ä¸èƒ½è¶…è¿‡500å­—ï¼');
                return;
            }
            
            const categoryTextMap = {
                'study': 'ğŸ“š å­¦ä¹ å‹åŠ›',
                'relationship': 'ğŸ‘¥ äººé™…å…³ç³»',
                'family': 'ğŸ  å®¶åº­çƒ¦æ¼',
                'future': 'â“ æœªæ¥è¿·èŒ«',
                'secret': 'ğŸ¤« å°ç§˜å¯†',
                'happy': 'ğŸŒŸ å¼€å¿ƒåˆ†äº«',
                'other': 'ğŸ’­ å…¶ä»–'
            };
            
            const newTreehole = {
                id: 'tree_' + Date.now(),
                category: category,
                categoryText: categoryTextMap[category] || 'ğŸ’­ å…¶ä»–',
                content: content,
                timestamp: new Date().toISOString(),
                reactions: { 'ğŸ‘': 0, 'â¤ï¸': 0, 'ğŸ¤—': 0, 'ğŸŒˆ': 0, 'ğŸ’¡': 0, 'ğŸ«‚': 0 }
            };
            
            treeholePosts.unshift(newTreehole);
            saveTreeholePosts();
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('treehole-form').reset();
            document.getElementById('char-count').textContent = '0';
            
            // æ›´æ–°UI
            updateTreeholePosts();
            
            alert('æ ‘æ´å‘å¸ƒæˆåŠŸï¼ä½ çš„å€¾è¯‰å·²è¢«å®‰å…¨ä¿å­˜ã€‚');
        }
        
        // åˆ›å»ºæ–°åˆ›ä½œ
        function createNewCreation() {
            const title = document.getElementById('creation-title').value.trim();
            const type = document.getElementById('creation-type').value;
            const content = document.getElementById('creation-content').value.trim();
            
            if (!title || !type || !content) {
                alert('è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼');
                return;
            }
            
            const typeTextMap = {
                'essay': 'ä½œæ–‡å±•ç¤º',
                'notes': 'å­¦ä¹ ç¬”è®°',
                'method': 'å­¦ä¹ æ–¹æ³•',
                'other': 'å…¶ä»–åˆ›ä½œ'
            };
            
            const newCreation = {
                id: 'creation_' + Date.now(),
                authorId: currentUser.id,
                authorName: currentUser.name,
                authorClass: currentUser.classId,
                title: title,
                type: type,
                typeText: typeTextMap[type] || 'å…¶ä»–åˆ›ä½œ',
                content: content.substring(0, 200) + (content.length > 200 ? '...' : ''),
                fullContent: content,
                timestamp: new Date().toISOString(),
                likes: [],
                likesCount: 0,
                comments: []
            };
            
            creations.unshift(newCreation);
            saveCreations();
            
            // æ›´æ–°ç”¨æˆ·ç»Ÿè®¡
            currentUser.stats.postsCount++;
            saveUser();
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('creation-form').reset();
            
            // æ›´æ–°UI
            updateCreations();
            updateUserUI();
            
            alert('åˆ›ä½œå‘å¸ƒæˆåŠŸï¼');
        }
        
        // æ›´æ–°å¸–å­æ˜¾ç¤º
        function updatePosts() {
            const container = document.getElementById('posts-container');
            const classFilter = document.getElementById('class-filter').value;
            const typeFilter = document.getElementById('type-filter').value;
            const searchQuery = document.getElementById('search-input').value.toLowerCase().trim();
            
            // è¿‡æ»¤å¸–å­
            let filteredPosts = allPosts;
            
            if (classFilter !== 'all') {
                filteredPosts = filteredPosts.filter(post => 
                    post.authorClass === classFilter || post.visibility === 'all'
                );
            }
            
            if (typeFilter !== 'all') {
                filteredPosts = filteredPosts.filter(post => post.type === typeFilter);
            }
            
            if (searchQuery) {
                filteredPosts = filteredPosts.filter(post => 
                    post.content.toLowerCase().includes(searchQuery) ||
                    post.authorName.toLowerCase().includes(searchQuery)
                );
            }
            
            // æ¸²æŸ“å¸–å­
            container.innerHTML = '';
            
            if (filteredPosts.length === 0) {
                container.innerHTML = '<p class="text-center text-muted">æš‚æ— åŠ¨æ€ï¼Œå¿«æ¥å‘å¸ƒç¬¬ä¸€æ¡å§ï¼</p>';
                return;
            }
            
            filteredPosts.forEach(post => {
                container.appendChild(createPostElement(post));
            });
        }
        
        // æ›´æ–°æ ‘æ´å¸–å­æ˜¾ç¤º
        function updateTreeholePosts() {
            const container = document.getElementById('treehole-container');
            container.innerHTML = '';
            
            if (treeholePosts.length === 0) {
                container.innerHTML = '<p class="text-center text-muted">æ ‘æ´ç©ºç©ºå¦‚ä¹Ÿï¼Œå¿«æ¥å€¾è¯‰ä½ çš„å¿ƒäº‹å§ï¼</p>';
                return;
            }
            
            treeholePosts.forEach(post => {
                container.appendChild(createTreeholeElement(post));
            });
        }
        
        // æ›´æ–°åˆ›ä½œæ˜¾ç¤º
        function updateCreations() {
            const container = document.getElementById('creations-container');
            container.innerHTML = '';
            
            if (creations.length === 0) {
                container.innerHTML = '<p class="text-center text-muted">æš‚æ— åˆ›ä½œï¼Œå¿«æ¥åˆ†äº«ä½ çš„ä½œå“å§ï¼</p>';
                return;
            }
            
            creations.forEach(creation => {
                container.appendChild(createCreationElement(creation));
            });
        }
        
        // æ›´æ–°ç­çº§å¿«é€Ÿè®¿é—®
        function updateQuickClasses() {
            const container = document.getElementById('quick-classes');
            container.innerHTML = '';
            
            // æ˜¾ç¤ºå‰6ä¸ªç­çº§
            for (let i = 1; i <= 6; i++) {
                const classItem = document.createElement('div');
                classItem.className = 'class-card';
                classItem.style.cursor = 'pointer';
                classItem.style.padding = '10px';
                classItem.style.marginBottom = '10px';
                classItem.innerHTML = `
                    <h4 style="margin-bottom:5px;">é«˜ä¸‰(${i})ç­</h4>
                    <div style="font-size:0.8rem;color:#666;">
                        <span>ğŸ‘¥ ${getRandomInt(40, 55)}</span> | 
                        <span>ğŸ“ ${getRandomInt(5, 30)}</span>
                    </div>
                `;
                
                classItem.addEventListener('click', function() {
                    switchPage('classes');
                    setTimeout(() => showClassDetails(i), 100);
                });
                
                container.appendChild(classItem);
            }
        }
        
        // æ›´æ–°æˆ‘çš„å¸–å­
        function updateMyPosts() {
            const container = document.getElementById('my-posts-container');
            container.innerHTML = '';
            
            const myPosts = allPosts.filter(post => post.authorId === currentUser.id);
            const myCreations = creations.filter(creation => creation.authorId === currentUser.id);
            
            if (myPosts.length === 0 && myCreations.length === 0) {
                container.innerHTML = '<p class="text-center text-muted">ä½ è¿˜æ²¡æœ‰å‘å¸ƒä»»ä½•å†…å®¹ï¼Œå¿«å»å‘å¸–å§ï¼</p>';
                return;
            }
            
            // æ˜¾ç¤ºæˆ‘çš„æ™®é€šå¸–å­
            myPosts.forEach(post => {
                container.appendChild(createPostElement(post, true));
            });
            
            // æ˜¾ç¤ºæˆ‘çš„åˆ›ä½œ
            myCreations.forEach(creation => {
                container.appendChild(createCreationElement(creation, true));
            });
        }
        
        // åˆ›å»ºå¸–å­å…ƒç´ 
        function createPostElement(post, isMyPost = false) {
            const postEl = document.createElement('div');
            postEl.className = 'post';
            postEl.dataset.id = post.id;
            
            const typeMap = {
                'dynamic': 'åŠ¨æ€',
                'question': 'æé—®',
                'share': 'åˆ†äº«'
            };
            
            const visibilityText = post.visibility === 'all' ? 'å…¨éƒ¨ç­çº§å¯è§' : 'ä»…æœ¬ç­å¯è§';
            const isLiked = currentUser && post.likes.includes(currentUser.id);
            
            postEl.innerHTML = `
                <div class="post-header">
                    <div class="post-author">
                        <div class="author-avatar">${post.authorName.charAt(0)}</div>
                        <div class="author-info">
                            <h4>${post.authorName}</h4>
                            <div class="author-class">é«˜ä¸‰(${post.authorClass})ç­ â€¢ ${typeMap[post.type] || 'åŠ¨æ€'}</div>
                        </div>
                    </div>
                    <div class="post-time">${formatTime(post.timestamp)}</div>
                </div>
                <div class="post-content">${escapeHtml(post.content)}</div>
                <div class="text-muted" style="font-size:0.85rem;margin-bottom:10px;">${visibilityText}</div>
                <div class="post-actions">
                    <button class="action-btn like-btn ${isLiked ? 'liked' : ''}" data-id="${post.id}">
                        <span class="emoji">${isLiked ? 'â¤ï¸' : 'ğŸ¤'}</span>
                        <span>èµ</span>
                        <span class="like-count">(${post.likesCount})</span>
                    </button>
                    <button class="action-btn comment-btn" data-id="${post.id}">
                        <span class="emoji">ğŸ’¬</span>
                        <span>è¯„è®º</span>
                        <span>(${post.comments.length})</span>
                    </button>
                    ${isMyPost ? `<button class="delete-btn delete-post-btn" data-id="${post.id}">åˆ é™¤</button>` : ''}
                </div>
            `;
            
            // æ·»åŠ ç‚¹èµäº‹ä»¶
            const likeBtn = postEl.querySelector('.like-btn');
            likeBtn.addEventListener('click', function() {
                toggleLike(post.id);
            });
            
            // æ·»åŠ è¯„è®ºäº‹ä»¶
            const commentBtn = postEl.querySelector('.comment-btn');
            commentBtn.addEventListener('click', function() {
                openCommentModal(post.id);
            });
            
            // æ·»åŠ åˆ é™¤äº‹ä»¶ï¼ˆä»…è‡ªå·±çš„å¸–å­ï¼‰
            if (isMyPost) {
                const deleteBtn = postEl.querySelector('.delete-post-btn');
                deleteBtn.addEventListener('click', function() {
                    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡åŠ¨æ€å—ï¼Ÿ')) {
                        deletePost(post.id);
                    }
                });
            }
            
            return postEl;
        }
        
        // åˆ›å»ºæ ‘æ´å…ƒç´ 
        function createTreeholeElement(post) {
            const postEl = document.createElement('div');
            postEl.className = 'post treehole-post';
            postEl.dataset.id = post.id;
            
            // è·å–å½“å‰ç”¨æˆ·å¯¹è¿™æ¡æ ‘æ´çš„ååº”ï¼ˆä»sessionStorageï¼‰
            const userReactions = JSON.parse(sessionStorage.getItem('treehole_reactions') || '{}');
            const userReaction = userReactions[post.id];
            
            postEl.innerHTML = `
                <div class="post-header">
                    <div class="post-author">
                        <div class="author-avatar">?</div>
                        <div class="author-info">
                            <h4>åŒ¿ååŒå­¦</h4>
                            <div class="author-class">${post.categoryText}</div>
                        </div>
                    </div>
                    <div class="post-time">${formatTime(post.timestamp)}</div>
                </div>
                <div class="post-content">${escapeHtml(post.content)}</div>
                <div class="reactions-container">
                    <button class="reaction-btn ${userReaction === 'ğŸ‘' ? 'active' : ''}" data-emoji="ğŸ‘" data-id="${post.id}">
                        <span class="emoji">ğŸ‘</span> <span>æ”¯æŒ (${post.reactions['ğŸ‘'] || 0})</span>
                    </button>
                    <button class="reaction-btn ${userReaction === 'â¤ï¸' ? 'active' : ''}" data-emoji="â¤ï¸" data-id="${post.id}">
                        <span class="emoji">â¤ï¸</span> <span>æŠ±æŠ± (${post.reactions['â¤ï¸'] || 0})</span>
                    </button>
                    <button class="reaction-btn ${userReaction === 'ğŸ¤—' ? 'active' : ''}" data-emoji="ğŸ¤—" data-id="${post.id}">
                        <span class="emoji">ğŸ¤—</span> <span>é¼“åŠ± (${post.reactions['ğŸ¤—'] || 0})</span>
                    </button>
                    <button class="reaction-btn ${userReaction === 'ğŸŒˆ' ? 'active' : ''}" data-emoji="ğŸŒˆ" data-id="${post.id}">
                        <span class="emoji">ğŸŒˆ</span> <span>åŠ æ²¹ (${post.reactions['ğŸŒˆ'] || 0})</span>
                    </button>
                    <button class="reaction-btn ${userReaction === 'ğŸ’¡' ? 'active' : ''}" data-emoji="ğŸ’¡" data-id="${post.id}">
                        <span class="emoji">ğŸ’¡</span> <span>æœ‰å¯å‘ (${post.reactions['ğŸ’¡'] || 0})</span>
                    </button>
                    <button class="reaction-btn ${userReaction === 'ğŸ«‚' ? 'active' : ''}" data-emoji="ğŸ«‚" data-id="${post.id}">
                        <span class="emoji">ğŸ«‚</span> <span>åŒåœ¨ (${post.reactions['ğŸ«‚'] || 0})</span>
                    </button>
                </div>
                <div style="margin-top:10px; text-align:right;">
                    <button class="delete-btn delete-treehole-btn" data-id="${post.id}">åˆ é™¤</button>
                </div>
            `;
            
            // æ·»åŠ ååº”äº‹ä»¶
            postEl.querySelectorAll('.reaction-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const emoji = this.getAttribute('data-emoji');
                    const postId = this.getAttribute('data-id');
                    addTreeholeReaction(postId, emoji);
                });
            });
            
            // æ·»åŠ åˆ é™¤æŒ‰é’®äº‹ä»¶
            const deleteBtn = postEl.querySelector('.delete-treehole-btn');
            deleteBtn.addEventListener('click', function() {
                currentTreeholeIdForDelete = this.getAttribute('data-id');
                openPasswordModal();
            });
            
            return postEl;
        }
        
        // åˆ›å»ºåˆ›ä½œå…ƒç´ 
        function createCreationElement(creation, isMyCreation = false) {
            const creationEl = document.createElement('div');
            creationEl.className = 'post';
            creationEl.dataset.id = creation.id;
            
            const isLiked = currentUser && creation.likes.includes(currentUser.id);
            
            creationEl.innerHTML = `
                <div class="post-header">
                    <div class="post-author">
                        <div class="author-avatar">${creation.authorName.charAt(0)}</div>
                        <div class="author-info">
                            <h4>${creation.authorName}</h4>
                            <div class="author-class">é«˜ä¸‰(${creation.authorClass})ç­ â€¢ ${creation.typeText || 'åˆ›ä½œ'}</div>
                        </div>
                    </div>
                    <div class="post-time">${formatTime(creation.timestamp)}</div>
                </div>
                <h4 style="margin:10px 0;color:#333;">${escapeHtml(creation.title)}</h4>
                <div class="post-content">${escapeHtml(creation.content)}</div>
                <div class="post-actions">
                    <button class="action-btn like-btn ${isLiked ? 'liked' : ''}" data-id="${creation.id}" data-type="creation">
                        <span class="emoji">${isLiked ? 'â¤ï¸' : 'ğŸ¤'}</span>
                        <span>èµ</span>
                        <span class="like-count">(${creation.likesCount})</span>
                    </button>
                    <button class="action-btn comment-btn" data-id="${creation.id}" data-type="creation">
                        <span class="emoji">ğŸ’¬</span>
                        <span>è¯„è®º</span>
                        <span>(${creation.comments.length})</span>
                    </button>
                    ${isMyCreation ? `<button class="delete-btn delete-creation-btn" data-id="${creation.id}">åˆ é™¤</button>` : ''}
                </div>
            `;
            
            // æ·»åŠ ç‚¹èµäº‹ä»¶
            const likeBtn = creationEl.querySelector('.like-btn');
            likeBtn.addEventListener('click', function() {
                const id = this.getAttribute('data-id');
                const type = this.getAttribute('data-type');
                toggleLike(id, type);
            });
            
            // æ·»åŠ è¯„è®ºäº‹ä»¶
            const commentBtn = creationEl.querySelector('.comment-btn');
            commentBtn.addEventListener('click', function() {
                const id = this.getAttribute('data-id');
                const type = this.getAttribute('data-type');
                openCommentModal(id, type);
            });
            
            // æ·»åŠ åˆ é™¤äº‹ä»¶ï¼ˆä»…è‡ªå·±çš„åˆ›ä½œï¼‰
            if (isMyCreation) {
                const deleteBtn = creationEl.querySelector('.delete-creation-btn');
                deleteBtn.addEventListener('click', function() {
                    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡åˆ›ä½œå—ï¼Ÿ')) {
                        deleteCreation(this.getAttribute('data-id'));
                    }
                });
            }
            
            return creationEl;
        }
        
        // ç‚¹èµ/å–æ¶ˆç‚¹èµ
        function toggleLike(postId, type = 'post') {
            if (!currentUser) {
                alert('è¯·å…ˆç™»å½•ï¼');
                return;
            }
            
            let item, items, storageKey;
            
            if (type === 'creation') {
                items = creations;
                storageKey = CONFIG.STORAGE_KEYS.CREATIONS;
                item = items.find(c => c.id === postId);
            } else {
                items = allPosts;
                storageKey = CONFIG.STORAGE_KEYS.POSTS;
                item = items.find(p => p.id === postId);
            }
            
            if (!item) return;
            
            const userIndex = item.likes.indexOf(currentUser.id);
            
            if (userIndex === -1) {
                // ç‚¹èµ
                item.likes.push(currentUser.id);
                item.likesCount++;
                
                // æ›´æ–°ä½œè€…è·èµæ•°
                if (type !== 'creation') {
                    const author = allPosts.find(p => p.id === postId)?.authorId;
                    if (author === currentUser.id) {
                        currentUser.stats.likesReceived++;
                    }
                }
            } else {
                // å–æ¶ˆç‚¹èµ
                item.likes.splice(userIndex, 1);
                item.likesCount--;
                
                // æ›´æ–°ä½œè€…è·èµæ•°
                if (type !== 'creation') {
                    const author = allPosts.find(p => p.id === postId)?.authorId;
                    if (author === currentUser.id) {
                        currentUser.stats.likesReceived = Math.max(0, currentUser.stats.likesReceived - 1);
                    }
                }
            }
            
            // ä¿å­˜æ•°æ®
            if (type === 'creation') {
                saveCreations();
            } else {
                savePosts();
            }
            
            saveUser();
            
            // æ›´æ–°UI
            updateUI();
        }
        
        // æ·»åŠ æ ‘æ´ååº”
        function addTreeholeReaction(postId, emoji) {
            // è·å–æˆ–åˆå§‹åŒ–ç”¨æˆ·ååº”è®°å½•
            let userReactions = JSON.parse(sessionStorage.getItem('treehole_reactions') || '{}');
            
            // æŸ¥æ‰¾å¸–å­
            const post = treeholePosts.find(p => p.id === postId);
            if (!post) return;
            
            // è·å–ç”¨æˆ·å½“å‰ååº”
            const currentReaction = userReactions[postId];
            
            if (currentReaction === emoji) {
                // å–æ¶ˆååº”
                post.reactions[emoji] = Math.max(0, (post.reactions[emoji] || 0) - 1);
                delete userReactions[postId];
            } else {
                // å¦‚æœæœ‰å…¶ä»–ååº”ï¼Œå…ˆå–æ¶ˆ
                if (currentReaction) {
                    post.reactions[currentReaction] = Math.max(0, (post.reactions[currentReaction] || 0) - 1);
                }
                
                // æ·»åŠ æ–°ååº”
                post.reactions[emoji] = (post.reactions[emoji] || 0) + 1;
                userReactions[postId] = emoji;
            }
            
            // ä¿å­˜æ•°æ®
            sessionStorage.setItem('treehole_reactions', JSON.stringify(userReactions));
            saveTreeholePosts();
            
            // æ›´æ–°UI
            updateTreeholePosts();
        }
        
        // æ‰“å¼€è¯„è®ºæ¨¡æ€æ¡†
        function openCommentModal(postId, type = 'post') {
            currentPostIdForComment = { id: postId, type: type };
            
            let item;
            if (type === 'creation') {
                item = creations.find(c => c.id === postId);
            } else {
                item = allPosts.find(p => p.id === postId);
            }
            
            if (!item) return;
            
            const modal = document.getElementById('comment-modal');
            const commentList = document.getElementById('comment-list');
            
            // æ¸…ç©ºè¯„è®ºåˆ—è¡¨
            commentList.innerHTML = '';
            
            // æ·»åŠ ç°æœ‰è¯„è®º
            if (item.comments && item.comments.length > 0) {
                item.comments.forEach(comment => {
                    const commentEl = document.createElement('div');
                    commentEl.className = 'comment-item';
                    commentEl.style.padding = '10px';
                    commentEl.style.borderBottom = '1px solid #eee';
                    commentEl.innerHTML = `
                        <div style="font-weight:bold;">${escapeHtml(comment.authorName)}</div>
                        <div style="margin:5px 0;">${escapeHtml(comment.content)}</div>
                        <div style="font-size:0.8rem;color:#999;">${formatTime(comment.timestamp)}</div>
                    `;
                    commentList.appendChild(commentEl);
                });
            } else {
                commentList.innerHTML = '<p class="text-center text-muted">æš‚æ— è¯„è®ºï¼Œå¿«æ¥ç¬¬ä¸€æ¡è¯„è®ºå§ï¼</p>';
            }
            
            // æ¸…ç©ºè¯„è®ºè¾“å…¥æ¡†
            document.getElementById('new-comment').value = '';
            
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            modal.classList.add('active');
        }
        
        // æäº¤è¯„è®º
        function submitComment() {
            if (!currentUser) {
                alert('è¯·å…ˆç™»å½•ï¼');
                return;
            }
            
            const commentContent = document.getElementById('new-comment').value.trim();
            if (!commentContent) {
                alert('è¯·è¾“å…¥è¯„è®ºå†…å®¹ï¼');
                return;
            }
            
            const { id, type } = currentPostIdForComment;
            
            let items, storageKey;
            if (type === 'creation') {
                items = creations;
                storageKey = CONFIG.STORAGE_KEYS.CREATIONS;
            } else {
                items = allPosts;
                storageKey = CONFIG.STORAGE_KEYS.POSTS;
            }
            
            const item = items.find(i => i.id === id);
            if (!item) return;
            
            // æ·»åŠ è¯„è®º
            const newComment = {
                id: 'comment_' + Date.now(),
                authorId: currentUser.id,
                authorName: currentUser.name,
                content: commentContent,
                timestamp: new Date().toISOString()
            };
            
            if (!item.comments) item.comments = [];
            item.comments.push(newComment);
            
            // ä¿å­˜æ•°æ®
            if (type === 'creation') {
                saveCreations();
            } else {
                savePosts();
                
                // æ›´æ–°ä½œè€…è¯„è®ºæ•°
                if (item.authorId === currentUser.id) {
                    currentUser.stats.commentsCount++;
                    saveUser();
                }
            }
            
            // æ›´æ–°UI
            updateUI();
            
            // æ¸…ç©ºè¾“å…¥æ¡†å¹¶å…³é—­æ¨¡æ€æ¡†
            document.getElementById('new-comment').value = '';
            closeCommentModal();
            
            // é‡æ–°æ‰“å¼€æ¨¡æ€æ¡†æ˜¾ç¤ºæ–°è¯„è®º
            openCommentModal(id, type);
        }
        
        // å…³é—­è¯„è®ºæ¨¡æ€æ¡†
        function closeCommentModal() {
            document.getElementById('comment-modal').classList.remove('active');
            currentPostIdForComment = null;
        }
        
        // æ‰“å¼€å¯†ç æ¨¡æ€æ¡†
        function openPasswordModal() {
            document.getElementById('password-modal').classList.add('active');
            document.getElementById('delete-password').value = '';
        }
        
        // å…³é—­å¯†ç æ¨¡æ€æ¡†
        function closePasswordModal() {
            document.getElementById('password-modal').classList.remove('active');
            currentTreeholeIdForDelete = null;
        }
        
        // ç¡®è®¤åˆ é™¤æ ‘æ´
        function confirmDeleteTreehole() {
            const password = document.getElementById('delete-password').value;
            
            if (password === CONFIG.ADMIN_PASSWORD) {
                // å¯†ç æ­£ç¡®ï¼Œåˆ é™¤æ ‘æ´
                const index = treeholePosts.findIndex(p => p.id === currentTreeholeIdForDelete);
                if (index !== -1) {
                    treeholePosts.splice(index, 1);
                    saveTreeholePosts();
                    updateTreeholePosts();
                    alert('æ ‘æ´å¸–å­å·²åˆ é™¤ï¼');
                }
                closePasswordModal();
            } else {
                alert('å¯†ç é”™è¯¯ï¼åˆ é™¤å¤±è´¥ã€‚');
                document.getElementById('delete-password').value = '';
            }
        }
        
        // åˆ é™¤å¸–å­
        function deletePost(postId) {
            const index = allPosts.findIndex(p => p.id === postId);
            if (index !== -1) {
                allPosts.splice(index, 1);
                savePosts();
                updatePosts();
                updateMyPosts();
                alert('åŠ¨æ€å·²åˆ é™¤ï¼');
            }
        }
        
        // åˆ é™¤åˆ›ä½œ
        function deleteCreation(creationId) {
            const index = creations.findIndex(c => c.id === creationId);
            if (index !== -1) {
                creations.splice(index, 1);
                saveCreations();
                updateCreations();
                updateMyPosts();
                alert('åˆ›ä½œå·²åˆ é™¤ï¼');
            }
        }
        
        // æ›´æ–°ç”¨æˆ·èµ„æ–™
        function updateUserProfile() {
            const newName = document.getElementById('update-name').value.trim();
            const newClass = document.getElementById('update-class').value;
            
            if (!newName) {
                alert('æ˜µç§°ä¸èƒ½ä¸ºç©ºï¼');
                return;
            }
            
            // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
            currentUser.name = newName;
            currentUser.classId = newClass;
            
            // æ›´æ–°å¸–å­ä¸­çš„ä½œè€…ä¿¡æ¯
            allPosts.forEach(post => {
                if (post.authorId === currentUser.id) {
                    post.authorName = newName;
                    post.authorClass = newClass;
                }
            });
            
            // æ›´æ–°åˆ›ä½œä¸­çš„ä½œè€…ä¿¡æ¯
            creations.forEach(creation => {
                if (creation.authorId === currentUser.id) {
                    creation.authorName = newName;
                    creation.authorClass = newClass;
                }
            });
            
            // ä¿å­˜æ•°æ®
            saveUser();
            savePosts();
            saveCreations();
            
            // æ›´æ–°UI
            updateUserUI();
            updatePosts();
            updateCreations();
            updateMyPosts();
            
            alert('ä¸ªäººä¿¡æ¯å·²æ›´æ–°ï¼');
        }
        
        // ä¿å­˜æ•°æ®åˆ°localStorage
        function savePosts() {
            localStorage.setItem(CONFIG.STORAGE_KEYS.POSTS, JSON.stringify(allPosts));
        }
        
        function saveTreeholePosts() {
            localStorage.setItem(CONFIG.STORAGE_KEYS.TREEHOLE, JSON.stringify(treeholePosts));
        }
        
        function saveCreations() {
            localStorage.setItem(CONFIG.STORAGE_KEYS.CREATIONS, JSON.stringify(creations));
        }
        
        function saveUser() {
            localStorage.setItem(CONFIG.STORAGE_KEYS.USER, JSON.stringify(currentUser));
        }
        
        // æ›´æ–°æ‰€æœ‰UI
        function updateUI() {
            updateUserUI();
            updatePosts();
            updateTreeholePosts();
            updateCreations();
            updateQuickClasses();
        }
        
        // å·¥å…·å‡½æ•°
        function formatTime(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'åˆšåˆš';
            if (diffMins < 60) return `${diffMins}åˆ†é’Ÿå‰`;
            if (diffHours < 24) return `${diffHours}å°æ—¶å‰`;
            if (diffDays < 7) return `${diffDays}å¤©å‰`;
            
                        return date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' });
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        
        // åˆå§‹åŒ–ç­çº§é€‰é¡¹
        generateClassOptions();
    </script>
</body>
</html>
